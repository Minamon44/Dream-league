{% extends "layout.html" %}
{% block title %}{{ league[0] }} - League Profile{% endblock %}

{% block content %}


<div class="league-hero mb-5">
    <div class="text-center">

        {% if league[2] %}
            <img src="{{ league[2] }}" class="league-logo mb-3">
        {% endif %}

        <h1 class="league-name">{{ league[0] }}</h1>

        {% if league[3] %}
            <img src="{{ league[3] }}" class="league-flag mt-2">
        {% endif %}

        <p class="league-desc mt-3">
            Standings, teams and competition overview
        </p>

    </div>
</div>


<div class="section mb-5">
    <h3 class="section-title">üìä League Standings</h3>

    {% if standings %}
    <div class="table-responsive">
        <table class="table standings-table">
            <thead>
                <tr>
                    <th>Pos</th>
                    <th>Team</th>
                    <th>P</th>
                    <th>W</th>
                    <th>D</th>
                    <th>L</th>
                    <th>Pts</th>
                    <th>GF</th>
                    <th>GA</th>
                    <th>GD</th>
                    <th>Form</th>
                </tr>
            </thead>
            <tbody>

            {% for standing in standings %}
            <tr>
                <td class="pos-cell"
                    style="border-left: 6px solid
                    {% if standing[13] %}#2563eb
                    {% elif standing[14] %}#f59e0b
                    {% elif standing[15] %}#dc2626
                    {% else %}transparent{% endif %};">
                    {{ standing[0] }}
                </td>

                <td class="team-cell">
                    {% if standing[12] %}
                        <img src="{{ standing[12] }}" class="table-team-logo">
                    {% endif %}
                    <a href="{{ url_for('user.profile_team', team_id=standing[1]) }}">
                        {{ standing[2] }}
                    </a>
                </td>

                <td>{{ standing[3] }}</td>
                <td>{{ standing[4] }}</td>
                <td>{{ standing[5] }}</td>
                <td>{{ standing[6] }}</td>
                <td><span class="pts">{{ standing[7] }}</span></td>
                <td>{{ standing[8] }}</td>
                <td>{{ standing[9] }}</td>
                <td>{{ "+" if standing[10] > 0 else "" }}{{ standing[10] }}</td>

                <td class="form-cell">
                    {% for result in standing[11] %}
                        <span class="form-badge
                        {% if result == 'W' %}win
                        {% elif result == 'D' %}draw
                        {% else %}loss{% endif %}">
                            {{ result }}
                        </span>
                    {% endfor %}
                </td>
            </tr>
            {% endfor %}

            </tbody>
        </table>
    </div>

    <div class="legend mt-3">
        <span><i class="dot blue"></i> Top {{ league[4] }} ‚Äì Champions League</span>
        <span><i class="dot orange"></i> {{ league[5] }}th ‚Äì Europa League</span>
        <span><i class="dot red"></i> Bottom {{ league[6] }} ‚Äì Relegation</span>
    </div>

    {% else %}
        <p class="text-muted">No standings available.</p>
    {% endif %}
</div>


<div class="section">
    <h3 class="section-title">üèü League Teams</h3>

    {% if teams %}
    <div class="row">
        {% for team in teams %}
        <div class="col-md-4 col-lg-3 mb-4">
            <a href="{{ url_for('user.profile_team', team_id=team[0]) }}"
               class="league-team-card">

                <img src="{{ team[2] }}" class="league-team-logo">
                <span>{{ team[1] }}</span>

            </a>
        </div>
        {% endfor %}
    </div>
    {% else %}
        <p class="text-muted">No teams found.</p>
    {% endif %}
</div>


<style>
.league-hero {
    background: linear-gradient(135deg, #1f2933, #111827);
    color: #fff;
    padding: 55px;
    border-radius: 30px;
    box-shadow: var(--shadow);
    animation: fadeUp .6s ease;
}

.league-logo {
    max-height: 100px;
}

.league-name {
    font-size: 3rem;
    font-weight: 900;
}

.league-desc {
    color: #9ca3af;
}

.league-flag {
    width: 44px;
    border-radius: 6px;
}

.section-title {
    font-weight: 800;
    margin-bottom: 20px;
}

.standings-table {
    background: var(--card-bg);
    border-radius: 18px;
    overflow: hidden;
    box-shadow: var(--shadow);
}

.standings-table th {
    background: #111827;
    color: #fff;
    font-weight: 600;
}

[data-theme="dark"] .standings-table th {
    background: #020617;
}

.table-team-logo {
    height: 24px;
    margin-right: 6px;
}

.team-cell a {
    font-weight: 600;
    color: var(--text-main);
    text-decoration: none;
}

.pts {
    background: var(--accent);
    color: #fff;
    padding: 4px 10px;
    border-radius: 12px;
    font-weight: 700;
}

.form-cell {
    display: flex;
    gap: 4px;
}

.form-badge {
    width: 26px;
    height: 26px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    color: #fff;
    font-weight: 700;
}

.win { background: #16a34a; }
.draw { background: #6b7280; }
.loss { background: #dc2626; }

.legend {
    display: flex;
    gap: 20px;
    font-weight: 600;
}

.dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    display: inline-block;
    margin-right: 6px;
}

.blue { background: #2563eb; }
.orange { background: #f59e0b; }
.red { background: #dc2626; }

.league-team-card {
    background: var(--card-bg);
    border-radius: 18px;
    padding: 22px;
    text-align: center;
    box-shadow: var(--shadow);
    text-decoration: none;
    color: var(--text-main);
    display: flex;
    flex-direction: column;
    gap: 10px;
    transition: all .35s ease;
}

.league-team-card:hover {
    transform: translateY(-6px);
    box-shadow: 0 25px 50px rgba(0,0,0,.25);
}

.league-team-logo {
    height: 42px;
    margin: auto;
}

@keyframes fadeUp {
    from {
        opacity: 0;
        transform: translateY(25px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}
</style>

{% endblock %}
